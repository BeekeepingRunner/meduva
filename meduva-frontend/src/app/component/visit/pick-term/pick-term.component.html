<div *ngIf="loading">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>
<div *ngIf="!loading">
  <div *ngIf="canChooseDay">
    <h3>Choose term for {{ selectedService?.name }}:</h3>
    <div>
      <mat-form-field appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input matInput [matDatepicker]="picker"
               [matDatepickerFilter]="dateFilter"
               (dateInput)="onDayPick($event)" required>
        <mat-datepicker-toggle matSuffix [for]="picker" (click)="onDatePickerClick()"></mat-datepicker-toggle>
        <mat-datepicker #picker [dateClass]="dayChecker" [calendarHeaderComponent]="asyncHeader"></mat-datepicker>
      </mat-form-field>

      <mat-progress-spinner *ngIf="generatingTerms" mode="indeterminate"></mat-progress-spinner>
      <div *ngIf="canSelectTerm">
        <h3>Select an hour</h3>
        <div class="hour-buttons">
          <div *ngFor="let term of availableTerms">
            <div class="hour-button">
              <button mat-raised-button>{{ term.startTime | date: 'HH:mm' }}</button>
            </div>
          </div>
        </div>

        <!--
        <table mat-table [dataSource]="availableTerms" class="mat-elevation-z8">
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Select hour of visit</th>
            <td mat-cell *matCellDef="let term"><b>{{ term.startTime | date: 'HH:mm' }}</b></td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; let term; columns: displayedColumns;"
              (click)="selectTerm(term)" >
          </tr>
        </table>
        -->
      </div>
    </div>
  </div>
  <div *ngIf="!canChooseDay">
    Something went wrong, please try again later.
  </div>
</div>
